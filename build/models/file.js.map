{"version":3,"sources":["../../src/models/file.js"],"names":[],"mappings":"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","file":"file.js","sourcesContent":["import mongoose from 'mongoose';\nimport crypto from 'crypto';\nimport assert from 'assert';\n\nconst fileSchema = new mongoose.Schema({\n  data:[{\n    dataIndex: { type: Number, max: 2000 },\n\t  urlSearch: { type: String },\n\t  totalSearch: { type: String },\n    leadCount: { type: Number, max: 2000 },\n\t  profileVisit: { type: Array },\n    searchName: { type: String },\n    lastPage: { type: Number }\n\t}],\n\tmeta:{\n    username: { type: String },\n    linkedin: {\n      email: {type: String},\n      password: {type: String}\n    }\n\t}\n});\n\nconst File = mongoose.model('File', fileSchema, 'file');\n\nexport const findFile = (params, cb) => {\n  console.log(params.username);\n  File.findOne({ 'meta.username': params.username }, (err, file) => {\n    console.log(file);\n    if (err) return cb(err);\n    cb(null, file);\n    return true;\n  });\n};\n\nexport const deleteFile = (params, cb) => {\n  console.log(params.username);\n  File.findOne({ 'meta.username': params.username }, (err, file) => {\n    if (err) return cb(err);\n    for (let i = 0; i < file.data.length; i++) {\n      if (file.data[i].dataIndex === params.dataIndex) {\n        file.data.splice(i, 1);\n        break;\n      }\n    }\n    file.save((err, response) => {\n      const result = {\n        successfully_deleted: false\n      };\n      if (err) return cb(null, result);\n      result.successfully_deleted = true;\n      cb(null, result);\n      return true;\n    });\n  });\n};\n\nexport const addLinkedin = (params, cb) => {\n  console.log(params.username);\n  File.findOne({ 'meta.username': params.username }, (err, file) => {\n    console.log(file);\n    if (err) return cb(err);\n    const algorithm = 'aes256';\n    const key = 'password';\n    const passwordKey = params.password;\n    const cipher = crypto.createCipher(algorithm, key);\n    const encrypted = cipher.update(passwordKey, 'utf8', 'hex') + cipher.final('hex');\n    console.log(encrypted);\n    file.meta.linkedin.email = params.email;\n    file.meta.linkedin.password = encrypted;\n    file.save((err, response) => {\n      console.log(response);\n      const result = {\n        successfully_updated: false\n      };\n      if (err) return cb(null, result);\n      result.successfully_updated = true;\n      cb(null, result);\n      return true;\n    });\n  });\n};\n\nexport const addFile = (params, cb) => {\n  let result = {};\n  console.log(params.meta.username);\n  File.findOne({ 'meta.username': params.meta.username }, (err, file) => {\n    console.log(file);\n    if (file === null) {\n      const newFile = new File(params);\n      newFile.save((err, response) => {\n        console.log(response);\n        result = {\n          successfully_created: false\n        };\n        if (err) return cb(null, result);\n        result.successfully_created = true;\n        cb(null, result);\n        return true;\n      });\n    }\n    else {\n      params.data[0].leadCount = 0;\n      params.data[0].dataIndex = file.data.length;\n      file.data.push(params.data[0]);\n      file.save((err, response) => {\n        console.log(response);\n        const result = {\n          successfully_updated: false\n        };\n        if (err) return cb(null, result);\n        result.successfully_updated = true;\n        cb(null, result);\n        return true;\n      });\n    }\n  });\n};\n\nexport const saveFile = (params, cb) => {\n  let result = {};\n  console.log(params.meta.username);\n  File.findOne({ 'meta.username': params.meta.username }, (error, file) => {\n  \tconsole.log(file);\n    if (file === null) {\n      const newFile = new File(params);\n      newFile.save((err, response) => {\n        console.log(response);\n        result = {\n          successfully_created: false\n        };\n        if (err) return cb(null, result);\n        result.successfully_created = true;\n        cb(null, result);\n        return true;\n      });\n    } else {\n      const index = params.data[0].dataIndex;\n      file.data[index].totalSearch = params.data[0].totalSearch;\n      file.data[index].profileVisit = params.data[0].profileVisit;\n      file.data[index].lastPage = params.data[0].lastPage;\n      file.data[index].leadCount = params.data[0].leadCount;\n      //file.meta.lastPage = params.meta.lastPage;\n      console.log(params.data[0].totalSearch);\n      file.save((err, response) => {\n        \t      console.log(response);\n                console.log(err);\n        \t      const result = {\n        \t        successfully_updated: false\n        \t      };\n        \t      if (err) return cb(null, result);\n        \t      result.successfully_updated = true;\n        \t      cb(null, result);\n        \t      return true;\n        \t    });\n    }\n  });\n};"]}