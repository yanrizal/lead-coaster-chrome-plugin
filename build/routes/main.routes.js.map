{"version":3,"sources":["../../src/routes/main.routes.js"],"names":[],"mappings":"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","file":"main.routes.js","sourcesContent":["import express from 'express';\nimport bodyParser from 'body-parser';\nimport request from 'request';\nimport cheerio from 'cheerio';\nimport Crawler from 'simplecrawler';\nimport querystring from 'querystring';\nimport fs from 'fs';\nimport chalk from 'chalk';\nimport passport from 'passport';\n\n// const clientID = '759dlh2okqws42';\n// const clientSecret = 'OnnN8xW3X5zecdei';\n// const proxy = 'http://101.96.10.30:84';\n// const agent = new HttpsProxyAgent(proxy);\n\n// const router = express.Router();\n// const jsonParser = bodyParser.json();\n\n\n// router.get('/', (req, res) => {\n//   res.render('index', { title: 'index' });\n// });\n\n// router.get('/login', (req, res) => {\n//   res.render('index', { title: 'Login' });\n// });\n\n// router.get('/signup', (req, res) => {\n//   res.render('index', { title: 'Signup' });\n// });\n\n// router.get('/help', isLoggedIn, (req, res) => {\n//   res.render('index', { title: 'Help' });\n// });\n\n// router.post('/post/url', jsonParser, (req, res) => {\n//   const params = {\n//     url: req.body.url\n//   };\n//   console.log(params.url);\n//   const outputFilename = 'tmp/mysearch.json';\n\n//   fs.writeFile(outputFilename, JSON.stringify(params, null, 4), function(err) {\n//       if(err) {\n//         console.log(err);\n//       } else {\n//         console.log(\"JSON saved to \" + outputFilename);\n//       }\n//   });\n//   res.json(params.url);\n// });\n\n// // process the signup form\n// router.post('/signup-submit', function(req, res, next) {\n//     passport.authenticate('local-signup', function(err, user, info) { \n//         console.log(err);\n//         if (err) { return next(err); }\n//         if (!user) { return res.render('account'); }\n//         req.logIn(user, function(err) {\n//             if (err) { return next(err); }\n//             return res.json({detail: info});\n//         });\n//     })(req, res, next);\n// });\n\n\n// // route middleware to make sure a user is logged in\n// function isLoggedIn(req, res, next) {\n\n//     // if user is authenticated in the session, carry on \n//     if (req.isAuthenticated())\n//         return next();\n\n//     // if they aren't redirect them to the home page\n//     res.redirect('/');\n// }\n\n// app/routes.js\nmodule.exports = function(app, passport) {\n\n    app.get('/', function(req, res) {\n      let user = (req.user ? true : false);\n      res.render('index', { title: 'index', user: user });\n    });\n\n    app.get('/login', function(req, res) {\n      let user = (req.user ? true : false);\n      res.render('index', { title: 'login', user: user });\n    });\n\n    // process the login form\n    app.post('/login', function(req, res, next) {\n      passport.authenticate('local-login', function(err, user, info) { \n        console.log(err);\n        console.log(info);\n        console.log(user);\n        if (err) { return next(err); }\n        if (!user) { return res.redirect('/login'); }\n        req.logIn(user, function(err) {\n            if (err) { return next(err); }\n            return res.json({detail: info});\n        });\n      })(req, res, next);\n    });\n\n    app.get('/signup', function(req, res) {\n      let user = (req.user ? true : false);\n      res.render('index', { title: 'signup', user: user });\n    });\n\n    app.post('/signup', function(req, res, next) {\n      passport.authenticate('local-signup', function(err, user, info) { \n        console.log(err);\n        console.log(info);\n        console.log(user);\n        if (err) { return next(err); }\n        if (!user) { return res.redirect('/login'); }\n        req.logIn(user, function(err) {\n            if (err) { return next(err); }\n            return res.json({detail: info});\n        });\n      })(req, res, next);\n    });\n\n    app.get('/help', isLoggedIn, function(req, res) {\n      console.log(req.user);\n        let user = (req.user ? true : false);\n        res.render('index', { title: 'Help', user: user });\n    });\n\n    app.get('/logout', function(req, res) {\n        req.logout();\n        res.redirect('/');\n    });\n};\n\n// route middleware to make sure a user is logged in\nfunction isLoggedIn(req, res, next) {\n\n    // if user is authenticated in the session, carry on \n    if (req.isAuthenticated())\n        return next();\n\n    // if they aren't redirect them to the home page\n    res.redirect('/');\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*router.get('/crawler', (req, res) => {\n   var request2 = request.defaults({jar: true})\n    request2('http://www.linkedin.com', function (error, response, body) {\n      //console.log(body);\n\n      const $ = cheerio.load(body);\n      const csrf = $('#loginCsrfParam-login').val();\n      console.log(csrf);\n      console.log(response.headers[\"set-cookie\"]);\n      var dataCookie = mkdataCookie('MC_STORE_ID=66860; expires=' + new Date(new Date().getTime() + 86409000));\n      var form = {\n          session_key: 'yanuarrizal89@gmail.com',\n          session_password: '',\n          isJsEnabled: 'false',\n          loginCsrfParam: csrf,\n          sourceAlias:'0_7r5yezRXCiA_H0CRD8sf6DhOjTKUNps5xGTqeX8EEoi'\n      };\n\n      var formData = querystring.stringify(form);\n      var contentLength = formData.length;\n      const urlLogin = 'https://www.linkedin.com/uas/login-submit';\n      request({\n          headers: {\n            'Content-Length': contentLength,\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'Cookie': dataCookieToString(dataCookie)\n          },\n          uri: urlLogin,\n          body: formData,\n          method: 'POST'\n        }, function (err, res, body) {\n          //it works!\n          console.log(body);\n          var wstream = fs.createWriteStream('myOutput.txt');\n          wstream.write(body);\n          wstream.end();\n        });\n    });\n});\n\nfunction dataCookieToString(dataCookie) {\n    var t = \"\";\n    for (var x = 0; x < dataCookie.length; x++) {\n        t += ((t != \"\") ? \"; \" : \"\") + dataCookie[x].key + \"=\" + dataCookie[x].value;\n    }\n    return t;\n}\n\nfunction mkdataCookie(cookie) {\n    var t, j;\n    cookie = cookie.toString().replace(/,([^ ])/g, \",[12],$1\").split(\",[12],\");\n    for (var x = 0; x < cookie.length; x++) {\n        cookie[x] = cookie[x].split(\"; \");\n        j = cookie[x][0].split(\"=\");\n        t = {\n            key: j[0],\n            value: j[1]\n        };\n        for (var i = 1; i < cookie[x].length; i++) {\n            j = cookie[x][i].split(\"=\");\n            t[j[0]] = j[1];\n        }\n        cookie[x] = t;\n    }\n\n    return cookie;\n}*/\n\n\n// export default router;\n"]}